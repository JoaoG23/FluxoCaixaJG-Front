{"ast":null,"code":"import _regeneratorRuntime from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";// Components\nimport DarkButton from\"../../../Components/Buttons/ButtonDark\";import PrimaryButton from\"../../../Components/Buttons/PrimaryButton\";import Card from\"../../../Components/Card\";import{ContainerStyle,GroupBtnStyle}from\"../styles\";import AlertaDanger from\"../../../Components/Alerta/AlertaDanger\";import AlertaSuccess from\"../../../Components/Alerta/AlertaSuccess\";// Services\nimport urlBase from\"../../../services/UrlBase\";// Redux\nimport{setIsCarregado}from\"../../../Redux/actions/carregadorActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListaTodos=function ListaTodos(){var isCarregado=useSelector(function(store){return store===null||store===void 0?void 0:store.carregador;});var dispatch=useDispatch();var navigate=useNavigate();var toEdit=function toEdit(id){navigate(\"/admin/usuarios/\".concat(id));};var _useState=useState({}),_useState2=_slicedToArray(_useState,2),respostaServer=_useState2[0],setRespostaServer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModalserver=_useState4[0],setShowModalserver=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),usuarios=_useState6[0],setUsuario=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];useEffect(function(){var buscaTodosUsuarios=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var todosUsuarios;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return urlBase.get(\"/admin/usuario\");case 3:todosUsuarios=_context.sent;dispatch(setIsCarregado());console.info(todosUsuarios.data);setUsuario(todosUsuarios.data);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setError(_context.t0);console.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function buscaTodosUsuarios(){return _ref.apply(this,arguments);};}();buscaTodosUsuarios();},[]);var mostrarModalServer=function mostrarModalServer(time){setShowModalserver(true);setTimeout(function(){setShowModalserver(false);},time);};var deleteItemById=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(usuario){var idEncontrado,resposta,filterUsuarios;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:idEncontrado=usuario.id_login;_context2.next=3;return urlBase.delete(\"/admin/usuario/\".concat(idEncontrado));case 3:resposta=_context2.sent;setRespostaServer(resposta.data);mostrarModalServer(2000);filterUsuarios=usuarios===null||usuarios===void 0?void 0:usuarios.filter(// Eliminar do frontend\nfunction(dado){return dado.id_login!==usuario.id_login;});setUsuario(filterUsuarios);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteItemById(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(ContainerStyle,{children:[isCarregado&&/*#__PURE__*/_jsx(\"p\",{children:\"Carregando ...\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DarkButton,{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/adicionarusuario\",children:\"+ Adicionar\"})})}),usuarios===null||usuarios===void 0?void 0:usuarios.map(function(usuario){return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"./assets/perfil.svg\",alt:\"perfil\"}),/*#__PURE__*/_jsx(\"h4\",{children:usuario.nome_login}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Administador : \",usuario.isadmin_login?\"Sim\":\"Não\"]}),/*#__PURE__*/_jsxs(GroupBtnStyle,{children:[/*#__PURE__*/_jsx(PrimaryButton,{onClick:function onClick(){return toEdit(usuario.id_login);},children:/*#__PURE__*/_jsx(\"img\",{src:\"./assets/editar.svg\",alt:\"editar\"})}),/*#__PURE__*/_jsx(DarkButton,{onClick:function onClick(){deleteItemById(usuario);},children:/*#__PURE__*/_jsx(\"img\",{src:\"./assets/remover.svg\",alt:\"remover\"})})]})]},usuario.id_login);}),showModalserver&&/*#__PURE__*/_jsx(AlertaSuccess,{children:/*#__PURE__*/_jsx(\"h3\",{children:respostaServer===null||respostaServer===void 0?void 0:respostaServer.msg})}),error&&/*#__PURE__*/_jsx(AlertaDanger,{children:error===null||error===void 0?void 0:error.message})]});};export default ListaTodos;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","useDispatch","useSelector","DarkButton","PrimaryButton","Card","ContainerStyle","GroupBtnStyle","AlertaDanger","AlertaSuccess","urlBase","setIsCarregado","ListaTodos","isCarregado","store","carregador","dispatch","navigate","toEdit","id","respostaServer","setRespostaServer","showModalserver","setShowModalserver","usuarios","setUsuario","error","setError","buscaTodosUsuarios","get","todosUsuarios","console","info","data","mostrarModalServer","time","setTimeout","deleteItemById","usuario","idEncontrado","id_login","delete","resposta","filterUsuarios","filter","dado","map","nome_login","isadmin_login","msg","message"],"sources":["C:/github/FluxosFrontend/src/Pages/Usuarios/ListaTodos/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\n// Components\n\nimport DarkButton from \"../../../Components/Buttons/ButtonDark\";\nimport PrimaryButton from \"../../../Components/Buttons/PrimaryButton\";\nimport Card from \"../../../Components/Card\";\nimport { ContainerStyle, GroupBtnStyle } from \"../styles\";\nimport AlertaDanger from \"../../../Components/Alerta/AlertaDanger\";\nimport AlertaSuccess from \"../../../Components/Alerta/AlertaSuccess\";\n// Services\nimport urlBase from \"../../../services/UrlBase\";\n\n// Redux\nimport { setIsCarregado } from \"../../../Redux/actions/carregadorActions\";\nimport { Carregador } from \"../../../Redux/types/carregadorTypes\";\n\n// Types of the Component Main\nimport { RespostaServidor } from \"../../../Types/RespostaServidor\";\nimport { Usuario } from \"../../../Types/UsuariosTipos/Usuario\";\n\nconst ListaTodos: React.FC = () => {\n  const isCarregado = useSelector((store: Carregador) => store?.carregador);\n\n  const dispatch = useDispatch();\n\n  const navigate = useNavigate();\n\n  const toEdit = (id: number | string) => {\n    navigate(`/admin/usuarios/${id}`);\n  };\n\n  const [respostaServer, setRespostaServer] = useState<RespostaServidor>({});\n  const [showModalserver, setShowModalserver] = useState<boolean>(false);\n\n  const [usuarios, setUsuario] = useState<Usuario[]>([]);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    const buscaTodosUsuarios = async () => {\n      try {\n        const todosUsuarios = await urlBase.get(\"/admin/usuario\");\n        dispatch(setIsCarregado());\n        console.info(todosUsuarios.data);\n        setUsuario(todosUsuarios.data);\n      } catch (error) {\n        setError(error as Error);\n        console.error(error);\n      }\n    };\n    buscaTodosUsuarios();\n  }, []);\n\n  const mostrarModalServer = (time: number) => {\n    setShowModalserver(true);\n    setTimeout(() => {\n      setShowModalserver(false);\n    }, time);\n  };\n\n  const deleteItemById = async (usuario: Usuario) => {\n    let idEncontrado = usuario.id_login;\n    const resposta = await urlBase.delete(`/admin/usuario/${idEncontrado}`);\n    setRespostaServer(resposta.data);\n    mostrarModalServer(2000);\n\n    const filterUsuarios: any = usuarios?.filter(\n      // Eliminar do frontend\n      (dado: Usuario) => dado.id_login !== usuario.id_login\n    );\n    setUsuario(filterUsuarios);\n  };\n\n  return (\n    <ContainerStyle>\n      {isCarregado && <p>Carregando ...</p>}\n      <div>\n        <DarkButton>\n          <Link to={\"/admin/adicionarusuario\"}>+ Adicionar</Link>\n        </DarkButton>\n      </div>\n\n      {usuarios?.map((usuario: Usuario) => (\n        <Card key={usuario.id_login}>\n            <img  src=\"./assets/perfil.svg\" alt=\"perfil\"></img>\n          <h4>{usuario.nome_login}</h4>\n          <p>Administador : {usuario.isadmin_login ? \"Sim\" : \"Não\"}</p>\n          <GroupBtnStyle>\n            <PrimaryButton onClick={() => toEdit(usuario.id_login as number)}>\n              <img src=\"./assets/editar.svg\" alt=\"editar\"></img>\n            </PrimaryButton>\n            <DarkButton\n              onClick={() => {\n                deleteItemById(usuario);\n              }}\n            >\n              <img src=\"./assets/remover.svg\" alt=\"remover\"></img>\n            </DarkButton>\n          </GroupBtnStyle>\n        </Card>\n      ))}\n      {showModalserver && (\n        <AlertaSuccess>\n          <h3>{respostaServer?.msg}</h3>\n        </AlertaSuccess>\n      )}\n\n      {error && <AlertaDanger>{error?.message}</AlertaDanger>}\n    </ContainerStyle>\n  );\n};\nexport default ListaTodos;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}