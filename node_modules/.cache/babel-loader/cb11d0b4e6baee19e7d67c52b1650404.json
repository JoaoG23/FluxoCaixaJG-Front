{"ast":null,"code":"import _regeneratorRuntime from\"C:/github/FluxosFrontend/view/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/github/FluxosFrontend/view/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/github/FluxosFrontend/view/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from\"react-router-dom\";import{useState}from\"react\";// Components\nimport{Form,Container,HiperLink,Title}from\"./styles\";import Input from\"../../Components/Inputs/PrimaryInput\";import PrimaryButton from\"../../Components/Buttons/ButtonDark\";import ContainerBottons from\"../../Components/ContainerButtons\";import AlertaSuccess from\"../../Components/Alerta/AlertaSuccess\";import AlertaDanger from\"../../Components/Alerta/AlertaDanger\";import ButtonBackGround from\"../../Components/Buttons/BackgroundButton\";// Services\nimport getDataInput from\"../../services/getDataInput\";import urlBase from\"../../services/UrlBase\";import{toShowUntilSomeTime}from'../../services/toShowUntilSomeTime';// import { ToHomeUntilTime } from '../../services/toBackUntilTime'\nimport{insererDadosUsuarioNaSessao}from'./services/insererDadosUsuarioNaSessao';// Tipagens\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),respostaServer=_useState2[0],setRespostaServer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModalserver=_useState4[0],setShowModalserver=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),senha=_useState8[0],setSenha=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),usuario=_useState10[0],setUsuario=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),carregamento=_useState12[0],setCarregamento=_useState12[1];var dadosParaLogar={usuario:usuario,senha:senha};var logar=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var respostaLogin,dadosRequest,userData,tokenSessao,id,_usuario,admin;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCarregamento(true);e.preventDefault();_context.prev=2;_context.next=5;return urlBase.post(\"/login\",dadosParaLogar);case 5:respostaLogin=_context.sent;dadosRequest=respostaLogin.data;userData=dadosRequest.dadosUsuario;tokenSessao=dadosRequest.tokenUser;id=userData.id,_usuario=userData.usuario,admin=userData.admin;setRespostaServer(dadosRequest);insererDadosUsuarioNaSessao(id,_usuario,admin,tokenSessao);// Mostrar modal de sucesso\ntoShowUntilSomeTime(setShowModalserver,2000);setTimeout(function(){// navigate('/auth');\nwindow.location.assign('/admin/dash');},2000);_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setError(_context.t0);console.error(_context.t0);case 20:_context.prev=20;setCarregamento(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}}},_callee,null,[[2,16,20,23]]);}));return function logar(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Title,{children:\"Login\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",descricaoPlaceholder:\"Usuário\",onChange:function onChange(e){getDataInput(e,setUsuario);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",descricaoPlaceholder:\"Senha\",onChange:function onChange(e){getDataInput(e,setSenha);}}),/*#__PURE__*/_jsxs(ContainerBottons,{children:[/*#__PURE__*/_jsx(PrimaryButton,{onClick:logar,children:\"Logar\"}),/*#__PURE__*/_jsx(ButtonBackGround,{children:/*#__PURE__*/_jsx(Link,{to:\"/registrar\",children:\"Registrar\"})})]}),/*#__PURE__*/_jsx(HiperLink,{href:\"./senhaesquecida\",children:\"Esqueci a minha senha\"}),carregamento&&/*#__PURE__*/_jsx(\"h4\",{children:\"Carregando...\"})]}),showModalserver&&/*#__PURE__*/_jsx(AlertaSuccess,{children:/*#__PURE__*/_jsx(\"h3\",{children:respostaServer.msg})}),error&&/*#__PURE__*/_jsx(AlertaDanger,{onClick:function onClick(){return setError(null);},children:/*#__PURE__*/_jsx(\"p\",{children:error===null||error===void 0?void 0:error.message})})]});};export default Login;","map":{"version":3,"names":["Link","useNavigate","useState","Form","Container","HiperLink","Title","Input","PrimaryButton","ContainerBottons","AlertaSuccess","AlertaDanger","ButtonBackGround","getDataInput","urlBase","toShowUntilSomeTime","insererDadosUsuarioNaSessao","Login","navigate","respostaServer","setRespostaServer","showModalserver","setShowModalserver","error","setError","senha","setSenha","usuario","setUsuario","carregamento","setCarregamento","dadosParaLogar","logar","e","preventDefault","post","respostaLogin","dadosRequest","data","userData","dadosUsuario","tokenSessao","tokenUser","id","admin","setTimeout","window","location","assign","console","msg","message"],"sources":["C:/github/FluxosFrontend/view/src/Pages/Login/index.tsx"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\n\n// Components\nimport { Form, Container, HiperLink, Title } from \"./styles\";\nimport Input from \"../../Components/Inputs/PrimaryInput\";\nimport PrimaryButton from \"../../Components/Buttons/ButtonDark\";\nimport ContainerBottons from \"../../Components/ContainerButtons\";\nimport SecondaryButton from \"../../Components/Buttons/SecondaryButton\";\nimport AlertaSuccess from \"../../Components/Alerta/AlertaSuccess\";\nimport AlertaDanger from \"../../Components/Alerta/AlertaDanger\";\nimport  ButtonBackGround  from \"../../Components/Buttons/BackgroundButton\";\n// Services\nimport getDataInput from \"../../services/getDataInput\";\nimport urlBase from \"../../services/UrlBase\";\nimport { toShowUntilSomeTime } from '../../services/toShowUntilSomeTime'\n// import { ToHomeUntilTime } from '../../services/toBackUntilTime'\nimport { insererDadosUsuarioNaSessao } from './services/insererDadosUsuarioNaSessao';\n\n// Tipagens\nimport { DadosUsuario, ResponseLogin } from \"./types\";\nimport DarkButton from \"../../Components/Buttons/ButtonDark\";\n\nconst Login: React.FC = () => {\n  const navigate = useNavigate();\n  const [respostaServer, setRespostaServer] = useState<ResponseLogin>({});\n  const [showModalserver, setShowModalserver] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [senha, setSenha] = useState(\"\");\n  const [usuario, setUsuario] = useState(\"\");\n  const [carregamento, setCarregamento] = useState(false);\n\n  const dadosParaLogar: DadosUsuario = {\n    usuario: usuario,\n    senha: senha,\n  };\n\n  const logar = async (e: any) => {\n    setCarregamento(true);\n    e.preventDefault();\n    try {\n      const respostaLogin = await urlBase.post(\"/login\", dadosParaLogar);\n      const dadosRequest = respostaLogin.data;\n      const userData = dadosRequest.dadosUsuario;\n      const tokenSessao = dadosRequest.tokenUser;\n\n      const {\n        id,\n        usuario,\n        admin\n      } = userData;\n\n      setRespostaServer(dadosRequest);\n      insererDadosUsuarioNaSessao( id, usuario, admin , tokenSessao );\n      // Mostrar modal de sucesso\n      toShowUntilSomeTime(setShowModalserver,2000);\n      setTimeout(() => {\n        // navigate('/auth');\n        window.location.assign('/admin/dash')\n      }, 2000);\n    } catch (error) {\n      setError(error as Error);\n      console.error(error);\n    } finally {\n      setCarregamento(false);\n    }\n  };\n\n  return (\n    <Container>\n      <Form>\n        <Title>Login</Title>\n        <Input\n          type=\"text\"\n          descricaoPlaceholder={\"Usuário\"}\n          onChange={(e: any) => {\n            getDataInput(e, setUsuario);\n          }}\n        />\n        <Input\n          type=\"password\"\n          descricaoPlaceholder={\"Senha\"}\n          onChange={(e: any) => {\n            getDataInput(e, setSenha);\n          }}\n        />\n        <ContainerBottons>\n          <PrimaryButton onClick={logar}>Logar</PrimaryButton>\n          <ButtonBackGround>\n            <Link to={\"/registrar\"}>Registrar</Link>\n          </ButtonBackGround>\n        </ContainerBottons>\n        <HiperLink href=\"./senhaesquecida\">Esqueci a minha senha</HiperLink>\n        {carregamento && <h4>Carregando...</h4>}\n      </Form>\n\n      {showModalserver && (\n        <AlertaSuccess>\n          <h3>{respostaServer.msg}</h3>\n        </AlertaSuccess>\n      )}\n      {error && (\n        <AlertaDanger onClick={() => setError(null)}>\n          <p>{error?.message}</p>\n        </AlertaDanger>\n      )}\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}