{"ast":null,"code":"import _regeneratorRuntime from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/github/FluxosFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";// Components\nimport PrimaryButton from\"../../Components/Buttons/PrimaryButton\";import{HeaderStyle,ContainerStyle,TableStyle}from\"./styles\";import DarkButton from\"../../Components/Buttons/ButtonDark\";import AlertaDanger from\"../../Components/Alerta/AlertaDanger\";// Redux\nimport{setTodosItemsFluxoCaixa}from\"../../Redux/actions/fluxoActions\";import{useDispatch,useSelector}from\"react-redux\";import{setIsCarregado}from\"../../Redux/actions/carregadorActions\";// Services\nimport urlBase from\"../../services/UrlBase\";// Types Component main\nimport SecondaryButton from\"../../Components/Buttons/SecondaryButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Fluxo=function Fluxo(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var navigate=useNavigate();var toEdit=function toEdit(id){navigate(\"/admin/fluxo/\".concat(id));};var dispatch=useDispatch();var dadosItems=useSelector(function(store){var _store$fluxo;return store===null||store===void 0?void 0:(_store$fluxo=store.fluxo)===null||_store$fluxo===void 0?void 0:_store$fluxo.items;});var isCarregado=useSelector(function(store){return store===null||store===void 0?void 0:store.carregador;});useEffect(function(){var loadItemsFluxo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var todosItems;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return urlBase.get(\"/admin/fluxo\");case 3:todosItems=_context.sent;dispatch(setIsCarregado());dispatch(setTodosItemsFluxoCaixa(todosItems.data));_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setError(_context.t0);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function loadItemsFluxo(){return _ref.apply(this,arguments);};}();loadItemsFluxo();},[dispatch]);// ---------- Deletar item\nvar deleteItemById=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(idItem){var idEncontrado,respostaItem,filterItensConta;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;idEncontrado=idItem.id_item_fluxo;_context2.next=4;return urlBase.delete(\"/admin/fluxo/\".concat(idEncontrado));case 4:respostaItem=_context2.sent;filterItensConta=dadosItems===null||dadosItems===void 0?void 0:dadosItems.filter(// Eliminar do frontend\nfunction(dado){return dado.id_item_fluxo!==idItem.id_item_fluxo;});dispatch(setTodosItemsFluxoCaixa(filterItensConta));_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);setError(_context2.t0);console.error(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function deleteItemById(_x){return _ref2.apply(this,arguments);};}();// --------- Modal ----\n// const [showModalDeletar, setShowModalDeletar] = useState(false);\n// const mostrarModalDeletar = (time: number) => {\n//   setShowModalDeletar(true);\n//   setTimeout(() => {\n//     setShowModalDeletar(false);\n//   }, time);\n// };\nreturn/*#__PURE__*/_jsxs(ContainerStyle,{children:[/*#__PURE__*/_jsxs(HeaderStyle,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Fluxo de Caixa\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/fluxo/add\",children:/*#__PURE__*/_jsx(PrimaryButton,{children:\"+ adicionar\"})})]}),/*#__PURE__*/_jsxs(TableStyle,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"M\\xEAs\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ano\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hora\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Elementos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subelementos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtipos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Minitipos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nanotipos\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Saldo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Editar\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Excluir\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[isCarregado&&/*#__PURE__*/_jsx(\"p\",{children:\"Carregando ...\"}),dadosItems===null||dadosItems===void 0?void 0:dadosItems.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id_item_fluxo}),/*#__PURE__*/_jsx(\"td\",{children:item.dia_item_fluxo}),/*#__PURE__*/_jsx(\"td\",{children:item.mes_item_fluxo}),/*#__PURE__*/_jsx(\"td\",{children:item.ano_item_fluxo}),/*#__PURE__*/_jsx(\"td\",{children:item.hora_item_fluxo}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_elementos}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_subelementos}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_tipos}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_subtipos}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_minitipos}),/*#__PURE__*/_jsx(\"td\",{children:item.descricao_nanotipos}),/*#__PURE__*/_jsxs(\"td\",{children:[item.descricao_item_fluxo,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.valor_item_fluxo,\" R$\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.saldo_atual,\" R$\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SecondaryButton,{onClick:function onClick(){return toEdit(item.id_item_fluxo);},children:/*#__PURE__*/_jsx(\"img\",{src:\"./assets/editarpequeno.svg\",alt:\"editar\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(DarkButton,{onClick:function onClick(){deleteItemById(item);},children:\"X\"})})]},item.id_item_fluxo);})]})]}),error&&/*#__PURE__*/_jsx(AlertaDanger,{onClick:function onClick(){return setError(null);},children:error===null||error===void 0?void 0:error.message})]});};export default Fluxo;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","PrimaryButton","HeaderStyle","ContainerStyle","TableStyle","DarkButton","AlertaDanger","setTodosItemsFluxoCaixa","useDispatch","useSelector","setIsCarregado","urlBase","SecondaryButton","Fluxo","error","setError","navigate","toEdit","id","dispatch","dadosItems","store","fluxo","items","isCarregado","carregador","loadItemsFluxo","get","todosItems","data","console","deleteItemById","idItem","idEncontrado","id_item_fluxo","delete","respostaItem","filterItensConta","filter","dado","map","item","dia_item_fluxo","mes_item_fluxo","ano_item_fluxo","hora_item_fluxo","descricao_elementos","descricao_subelementos","descricao_tipos","descricao_subtipos","descricao_minitipos","descricao_nanotipos","descricao_item_fluxo","valor_item_fluxo","saldo_atual","message"],"sources":["C:/github/FluxosFrontend/src/Pages/Fluxo/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\n// Components\nimport PrimaryButton from \"../../Components/Buttons/PrimaryButton\";\nimport { HeaderStyle, ContainerStyle, TableStyle } from \"./styles\";\nimport DarkButton from \"../../Components/Buttons/ButtonDark\";\nimport AlertaDanger from \"../../Components/Alerta/AlertaDanger\";\n\n// Redux\nimport { InformacoesItemsStore } from \"../../Redux/types/fluxoTypes\";\nimport { setTodosItemsFluxoCaixa } from \"../../Redux/actions/fluxoActions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setIsCarregado } from \"../../Redux/actions/carregadorActions\";\nimport { Carregador } from \"../../Redux/types/carregadorTypes\";\n\n\n// Services\nimport urlBase from \"../../services/UrlBase\";\n\n// Types Component main\nimport { DadosItem } from \"./types\";\nimport SecondaryButton from \"../../Components/Buttons/SecondaryButton\";\n\nconst Fluxo = () => {\n  const [error, setError] = useState<Error | null>(null);\n  const navigate = useNavigate();\n\n  const toEdit = (id: number | string) => {\n    navigate(`/admin/fluxo/${id}`);\n  };\n\n  const dispatch = useDispatch();\n  const dadosItems = useSelector(\n    (store: InformacoesItemsStore) => store?.fluxo?.items\n  );\n  const isCarregado = useSelector((store: Carregador) => store?.carregador);\n\n  useEffect(() => {\n    const loadItemsFluxo = async () => {\n      try {\n        const todosItems = await urlBase.get(\"/admin/fluxo\");\n        dispatch(setIsCarregado());\n        dispatch(setTodosItemsFluxoCaixa(todosItems.data));\n      } catch (error) {\n        setError(error as Error);\n        console.error(error);\n      }\n    };\n    loadItemsFluxo();\n  }, [dispatch]);\n\n  // ---------- Deletar item\n\n  const deleteItemById = async (idItem: DadosItem) => {\n\n    try {\n      \n      let idEncontrado = idItem.id_item_fluxo;\n      const respostaItem = await urlBase.delete(`/admin/fluxo/${idEncontrado}`);\n  \n      const filterItensConta: any = dadosItems?.filter(\n        // Eliminar do frontend\n        (dado: DadosItem) => dado.id_item_fluxo !== idItem.id_item_fluxo\n      );\n      dispatch(setTodosItemsFluxoCaixa(filterItensConta));\n    } catch (error) {\n      setError(error as Error);\n      console.error(error)\n    }\n  };\n\n  // --------- Modal ----\n  // const [showModalDeletar, setShowModalDeletar] = useState(false);\n\n  // const mostrarModalDeletar = (time: number) => {\n  //   setShowModalDeletar(true);\n  //   setTimeout(() => {\n  //     setShowModalDeletar(false);\n  //   }, time);\n  // };\n\n  return (\n    <ContainerStyle>\n      <HeaderStyle>\n        <h2>Fluxo de Caixa</h2>\n        <Link to={\"/admin/fluxo/add\"}>\n          <PrimaryButton>+ adicionar</PrimaryButton>\n        </Link>\n      </HeaderStyle>\n      <TableStyle>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Dia</th>\n            <th>Mês</th>\n            <th>Ano</th>\n            <th>Hora</th>\n            <th>Elementos</th>\n            <th>Subelementos</th>\n            <th>Tipos</th>\n            <th>Subtipos</th>\n            <th>Minitipos</th>\n            <th>Nanotipos</th>\n            <th>Descrição</th>\n            <th>Valor</th>\n            <th>Saldo</th>\n            <th>Editar</th>\n            <th>Excluir</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {isCarregado && <p>Carregando ...</p>}\n          {dadosItems?.map((item: DadosItem) => (\n            <tr key={item.id_item_fluxo}>\n              <td>{item.id_item_fluxo}</td>\n              <td>{item.dia_item_fluxo}</td>\n              <td>{item.mes_item_fluxo}</td>\n              <td>{item.ano_item_fluxo}</td>\n              <td>{item.hora_item_fluxo}</td>\n              <td>{item.descricao_elementos}</td>\n              <td>{item.descricao_subelementos}</td>\n              <td>{item.descricao_tipos}</td>\n              <td>{item.descricao_subtipos}</td>\n              <td>{item.descricao_minitipos}</td>\n              <td>{item.descricao_nanotipos}</td>\n              <td>{item.descricao_item_fluxo} </td>\n              <td>{item.valor_item_fluxo} R$</td>\n              <td>{item.saldo_atual} R$</td>\n              <td>\n                <SecondaryButton\n                  onClick={() => toEdit(item.id_item_fluxo as number)}\n                >\n                  <img src=\"./assets/editarpequeno.svg\" alt=\"editar\"></img>\n                </SecondaryButton>\n              </td>\n              <td>\n                <DarkButton\n                  onClick={() => {\n                    deleteItemById(item);\n                  }}\n                >\n                  X\n                </DarkButton>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </TableStyle>\n      {error && <AlertaDanger onClick={ () => setError(null)}>{error?.message}</AlertaDanger>}\n    </ContainerStyle>\n  );\n};\n\nexport default Fluxo;\n"],"mappings":"0VAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CAEA;AACA,MAAOC,cAAP,KAA0B,wCAA1B,CACA,OAASC,WAAT,CAAsBC,cAAtB,CAAsCC,UAAtC,KAAwD,UAAxD,CACA,MAAOC,WAAP,KAAuB,qCAAvB,CACA,MAAOC,aAAP,KAAyB,sCAAzB,CAEA;AAEA,OAASC,uBAAT,KAAwC,kCAAxC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,cAAT,KAA+B,uCAA/B,CAIA;AACA,MAAOC,QAAP,KAAoB,wBAApB,CAEA;AAEA,MAAOC,gBAAP,KAA4B,0CAA5B,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB,cAA0Bf,QAAQ,CAAe,IAAf,CAAlC,wCAAOgB,KAAP,eAAcC,QAAd,eACA,GAAMC,SAAQ,CAAGhB,WAAW,EAA5B,CAEA,GAAMiB,OAAM,CAAG,QAATA,OAAS,CAACC,EAAD,CAAyB,CACtCF,QAAQ,wBAAiBE,EAAjB,EAAR,CACD,CAFD,CAIA,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,WAAU,CAAGX,WAAW,CAC5B,SAACY,KAAD,yBAAkCA,MAAlC,SAAkCA,KAAlC,+BAAkCA,KAAK,CAAEC,KAAzC,uCAAkC,aAAcC,KAAhD,EAD4B,CAA9B,CAGA,GAAMC,YAAW,CAAGf,WAAW,CAAC,SAACY,KAAD,QAAuBA,MAAvB,SAAuBA,KAAvB,iBAAuBA,KAAK,CAAEI,UAA9B,EAAD,CAA/B,CAEA5B,SAAS,CAAC,UAAM,CACd,GAAM6B,eAAc,4FAAG,0LAEMf,QAAO,CAACgB,GAAR,CAAY,cAAZ,CAFN,QAEbC,UAFa,eAGnBT,QAAQ,CAACT,cAAc,EAAf,CAAR,CACAS,QAAQ,CAACZ,uBAAuB,CAACqB,UAAU,CAACC,IAAZ,CAAxB,CAAR,CAJmB,+EAMnBd,QAAQ,aAAR,CACAe,OAAO,CAAChB,KAAR,cAPmB,oEAAH,kBAAdY,eAAc,0CAApB,CAUAA,cAAc,GACf,CAZQ,CAYN,CAACP,QAAD,CAZM,CAAT,CAcA;AAEA,GAAMY,eAAc,6FAAG,kBAAOC,MAAP,wLAIfC,YAJe,CAIAD,MAAM,CAACE,aAJP,wBAKQvB,QAAO,CAACwB,MAAR,wBAA+BF,YAA/B,EALR,QAKbG,YALa,gBAObC,gBAPa,CAOWjB,UAPX,SAOWA,UAPX,iBAOWA,UAAU,CAAEkB,MAAZ,CAC5B;AACA,SAACC,IAAD,QAAqBA,KAAI,CAACL,aAAL,GAAuBF,MAAM,CAACE,aAAnD,EAF4B,CAPX,CAWnBf,QAAQ,CAACZ,uBAAuB,CAAC8B,gBAAD,CAAxB,CAAR,CAXmB,mFAanBtB,QAAQ,cAAR,CACAe,OAAO,CAAChB,KAAR,eAdmB,sEAAH,kBAAdiB,eAAc,6CAApB,CAkBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACE,MAAC,cAAD,yBACE,MAAC,WAAD,yBACE,sCADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAE,kBAAV,uBACE,KAAC,aAAD,0BADF,EAFF,GADF,cAOE,MAAC,UAAD,yBACE,oCACE,mCACE,0BADF,cAEE,2BAFF,cAGE,8BAHF,cAIE,2BAJF,cAKE,4BALF,cAME,iCANF,cAOE,oCAPF,cAQE,6BARF,cASE,gCATF,cAUE,iCAVF,cAWE,iCAXF,cAYE,uCAZF,cAaE,6BAbF,cAcE,6BAdF,cAeE,8BAfF,cAgBE,+BAhBF,GADF,EADF,cAsBE,yBACGP,WAAW,eAAI,qCADlB,CAEGJ,UAFH,SAEGA,UAFH,iBAEGA,UAAU,CAAEoB,GAAZ,CAAgB,SAACC,IAAD,qBACf,mCACE,oBAAKA,IAAI,CAACP,aAAV,EADF,cAEE,oBAAKO,IAAI,CAACC,cAAV,EAFF,cAGE,oBAAKD,IAAI,CAACE,cAAV,EAHF,cAIE,oBAAKF,IAAI,CAACG,cAAV,EAJF,cAKE,oBAAKH,IAAI,CAACI,eAAV,EALF,cAME,oBAAKJ,IAAI,CAACK,mBAAV,EANF,cAOE,oBAAKL,IAAI,CAACM,sBAAV,EAPF,cAQE,oBAAKN,IAAI,CAACO,eAAV,EARF,cASE,oBAAKP,IAAI,CAACQ,kBAAV,EATF,cAUE,oBAAKR,IAAI,CAACS,mBAAV,EAVF,cAWE,oBAAKT,IAAI,CAACU,mBAAV,EAXF,cAYE,sBAAKV,IAAI,CAACW,oBAAV,OAZF,cAaE,sBAAKX,IAAI,CAACY,gBAAV,SAbF,cAcE,sBAAKZ,IAAI,CAACa,WAAV,SAdF,cAeE,iCACE,KAAC,eAAD,EACE,OAAO,CAAE,yBAAMrC,OAAM,CAACwB,IAAI,CAACP,aAAN,CAAZ,EADX,uBAGE,YAAK,GAAG,CAAC,4BAAT,CAAsC,GAAG,CAAC,QAA1C,EAHF,EADF,EAfF,cAsBE,iCACE,KAAC,UAAD,EACE,OAAO,CAAE,kBAAM,CACbH,cAAc,CAACU,IAAD,CAAd,CACD,CAHH,eADF,EAtBF,GAASA,IAAI,CAACP,aAAd,CADe,EAAhB,CAFH,GAtBF,GAPF,CAmEGpB,KAAK,eAAI,KAAC,YAAD,EAAc,OAAO,CAAG,yBAAMC,SAAQ,CAAC,IAAD,CAAd,EAAxB,UAA+CD,KAA/C,SAA+CA,KAA/C,iBAA+CA,KAAK,CAAEyC,OAAtD,EAnEZ,GADF,CAuED,CAjID,CAmIA,cAAe1C,MAAf"},"metadata":{},"sourceType":"module"}